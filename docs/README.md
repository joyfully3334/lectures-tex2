# Документация (для редакторов)

Пример находится в `/docs/sample`.

<!--toc:start-->
- [Документация (для редакторов)](#документация-для-редакторов)
  - [Особенности](#особенности)
  - [Структура](#структура)
  - [Команды](#команды)
    - [Команды окружений](#команды-окружений)
    - [Команды скобок](#команды-скобок)
    - [Команды Tikz](#команды-tikz)
    - [Остальные команды](#остальные-команды)
  - [Стиль кода](#стиль-кода)
  - [Примечания](#примечания)
<!--toc:end-->

## Особенности

В конце конспекта находится предметный указатель, который генерируется
автоматически при помощи [команд](#команды) или `\index{...}`. Реализуется при
помощи пакета `imakeidx`. Для дополнительной настройки используется файл
`style.ist`.

Для создания изображений используется библиотека Tikz.

## Структура

В допущении, что техается только матан в папке `matan`

- /
  - matan/
    - preamble/
      - appendices.tex
      - general_config.tex -> /docs/sample/preamble/general_config.tex
      - introduction.tex
      - specific_config.tex
      - style.ist
      - title.tex -> /docs/sample/preamble/general_config.tex
    - src/
      - Файлы с техом лекций
    - matan.tex
    - Служебные файлы
  - docs/
    - sample/
      - то же, что и в /matan/
    - README.md
  - pdf
    - PDF files
  - scripts
    - clean_pdf.sh
    - prepare_pdf.sh
  - .gitignore
  - CONTRIBUTING.md
  - LICENSE
  - README.md

Пояснения:

- `appendices.tex` содержит приложения
- `general_config.tex` содержит глобальные настройки, которые применяются ко
  всем техаемым предметам.
- `introduction.tex` содержит введение
- `specific_config.tex` содержит локальные настройки, которые применяются только
  для данного предмета
- `style.ist` содержит настройки форматирования предметного указателя
- `title.tex` содержит титульную страницу

При копировании `/docs/sample` в (например) `/algem`, не забудьте заменить
`general_config.tex` и `title.tex` на ссылки.

## Команды

### Команды окружений

Для удобства, вместо громоздких окружений используются укороченные команды.
Например, `\begin{equation}blah\end{equation}` заменяется на `\jeq{blah}`. Все
команды окружений начинаются на `\j` для удобства запоминания. Если у команды
есть версия без нумерации, то она будет начинаться с `\k`.

Также некоторые команды автоматически добавляются в [предметный
указатель](#особенности) и объявляют названия для cross-reference обращения.
Версия команды без нумерации не добавляется в предметный указатель.

Например, для обращения к теореме (`\jth`) 15 из главы 1 параграфа 4 можно
использовать `\hyperref[theorem1.4.15]{теоремка}`, при этом нет необходимости
ставить `\label`, ведь он уже поставлен внутри `\jth`.

В квадратных скобках после объявления теорем, лемм, утверждений и определений,
можно написать, название теоремы (будет находится в скобках).

Пример использования теоремы, с cross-reference:

```latex
\jeq[О свойствах новогодних елок]{
  Наряженная новогодняя елка увеличивает вероятность появления новогоднего
  настроения на 15\%.
}

\keq[Теорема без номера]{
  Как понятно из \hyperref[theorem0.0.1]{предыдущей теоремы}, елки --- это
  круто.
}

\jeq{
  У данной теоремы нет названия, но есть номер.
}
```

Некоторые команды:

- Теоремы, леммы, и так далее
  - `\jtheorem` или `\jth` --- теорема с нумерацией
  - `\ktheorem` или `\kth` --- теорема без нумерации (нет в пред. указ.)
  - `\jproof` или `\jprf` --- доказательство
- Перечисления
  - `\jenumerate` или `\jen` --- упорядоченный список
  - `\jitemize` или `\jit` --- неупорядоченный список
- Математика
  - `\jequation` или `\jeq` --- аналог `\begin{equation}\end{equation}`
  - `\kequation` или `\keq` --- аналог `\begin{equation*}\end{equation*}`
  - `\jarray` или `\jarr` --- аналог `\begin{array}\end{array}`
- Остальное
  - `\jcustom` или `\jcst` --- например `\jcst[center]{}`

Полный список команд, а также все их укороченные версии можно посмотреть в
`/docs/sample/preamble/general_config.tex`.

Обращения происходят по самому подробному названию.

### Команды скобок

Начинаются с `f`.

| Команда | Пояснение             | Результат |
| ------- | --------------------- | :-------: |
| `\fd`   | parentheses (Default) |    (a)    |
| `\fb`   | Brackets              |    [a]    |
| `\fp`   | Pipes                 |   \|a\|   |
| `\fpp`  | double PiPes          | \|\|a\|\| |
| `\fdp`  | Double Pipes          | \|\|a\|\| |
| `\fP`   | double Pipes          | \|\|a\|\| |
| `\fc`   | Curly braces          |    {a}    |
| `\fa`   | Angles                |   \<a\>   |

Все эти скобки масштабируемы.

Пример:

```latex
\jeq{
  \fd{\jarr{c c}{1 & 2 \\ 3 & 4}} + \fd{\jarr{c c}{5 & 6 \\ 7 & 8}} =
  \fd{\jarr{c c}{6 & 8 \\ 10 & 12}}
}
```

Аналогичный листинг без данных функций:

```latex
\begin{equation}
  \left(\begin{array}{c c}1 & 2 \\ 3 & 4\end{array}\right) +
  \left(\begin{array}{c c}5 & 6 \\ 7 & 8\end{array}\right) =
  \left(\begin{array}{c c}6 & 8 \\ 10 & 12\end{array}\right)
\end{equation}
```

### Команды Tikz

WIP!!!!

Команды для рисования графики.

| Название                               | Пояснение                        |
| -------------------------------------- | -------------------------------- |
| `\tpic[opts]{caption}{...}`            | Окружение Tikz с подписью        |
| `\dpic[opts]{...}`                     | Окружение Tikz без подписи       |
| `\twrap[opts]{caption}{mod}{len}{...}` | `\tpic`, обернутый текстом       |
| `\dwrap[opts]{mod}{len}{...}`          | `\dpic`, обернутый текстом       |
| `\tpath[opts]{...}` / `\tp`            | `\draw[opts] ...;`               |
| `\tdraw[opts]{...}`                    | `\draw[opts] ...;`               |
| `\tfill[opts]{...}`                    | `\fill[opts] ...;`               |
| `\tnode[opts]{...}`                    | `\node[opts] {...};`               |
| `\tfor[opts]{var}{it}{...}` / `\tf`    | `\foreach[opts] var in {it} ...` |
| `\tmatrix[opts]{...}` / `\tm`          | `\matrix[opts]{...}`             |
| ...                                    | ...                              |

Подробную документацию см. здесь:

- [сайт](https://tikz.dev/tikz)
- [pdf версия](https://pgf-tikz.github.io/pgf/pgfmanual.pdf)

### Остальные команды

| Команда         | Назначение              | Пример                      |
| --------------- | ----------------------- | --------------------------- |
| `\vc{...}`      | Вектор над выражением   | `\vc x'`                    |
| `\rev`          | Степень -1              | `x\rev`                     |
| `\supr{...}`    | Степень `(exp)`         | `x_i\supr j`                |
| `\dt`           | `\Delta`                |                             |
| `\pal`          | `\partial`              |                             |
| `\ol{...}`      | `\overline{exp}`        |                             |
| `\unl{...}`     | `\underline{exp}`       |                             |
| `\to[under]`    | `->`                    |                             |
| `\from[under]`  | `<-`                    |                             |
| `\is[under]`    | `<->`                   |                             |
| `\tto[under]`   | `-->`                   |                             |
| `\ffrom[under]` | `<--`                   |                             |
| `\iss[under]`   | `<-->`                  |                             |
| `\To[under]`    | `==>`                   |                             |
| `\From[under]`  | `<==`                   |                             |
| `\hk`           | Выполняется             | `\forall x \hk x > 0`       |
| `\then`         | Отступ между кванторами | `\forall x \then \exists y` |
| `\mlim[under]`  | Предел (вертикальный)   | `\mlim[n \to \infty] x_n`   |
| `\sm{from}{to}` | Сумма (вертикальная)    | `\sm{n = 1}{\infty} a_n`    |

## Стиль кода

- Отступы 2 символа (пробелами)
- Не более 80 символов в ширину
- Выражение в строке пишется так: `$a + b$`
- Выражение на отдельной строке пишется так: `\[ a + b \]`
- Не использовать окружения, если есть подходящая функция. Например
  `\jeq{...}` вместо `\begin{eq..}...\end{eq..}`
  - Если подходящей функции нет, ее надо создать
  - Пока подходящей функции нет, можно использовать `\jcustom{eq..}{...}`
- Форматирование функций как в `C/C++`, но без пробелов перед фигурными скобками
- Пример оформления кванторной записи:
  `\forall \eps > 0 \then \exists N \in \N: \forall n > N \hk ...`

## Примечания

- В LaTeX в квадратных скобках находится (не более чем один) необязательный
  элемент, а в фигурных скобках обязательные аргументы (могут быть пустыми)
